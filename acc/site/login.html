<!DOCTYPE html>
<html lang="pt" >
<head>
  <meta charset="UTF-8">
  <title>Login - Doux </title>
  <link rel="stylesheet" href="logincadastro.css">

<body>
    
        <form>
            <h1>Faça Login</h1>
            <div class="inputbox">
                <ion-icon name="mail-outline"></ion-icon>
                <input type="email" required>
                <label for="">Email</label>
            </div>
            <div class="inputbox">
                <ion-icon name="lock-closed-outline"></ion-icon>
                <input type="password" required>
                <label for="">Senha<label>
            </div>

            <div class="logo-container">
                <img src="" alt="">
            </div>
            
            
            <button>Entrar</button>
            <div class="register">
                <p>Não possui conta? <a href="cadastro.html">Cadastre-se</a></p>
            </div>
        </form>
<script>
    const loginForm = document.querySelector('#loginForm');
    const registerForm = document.querySelector('#registerForm');
    
    
    if (loginForm) {
        loginForm.addEventListener('submit', async (e) => {
            e.preventDefault();
    
            const email = loginForm.querySelector('input[type="email"]').value.trim();
            const password = loginForm.querySelector('input[type="password"]').value.trim();
    
            
            if (!validateEmail(email)) {
                alert('Por favor, insira um email válido.');
                return;
            }
    
            if (password.length < 6) {
                alert('A senha deve ter pelo menos 6 caracteres.');
                return;
            }
    
            
            try {
                const response = await fetch('', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ email, password }),
                });
    
                const data = await response.json();
    
                if (response.ok) {
                    alert('Login realizado com sucesso!');
                    
                } else {
                    alert(`Erro: ${data.message}`);
                }
            } catch (error) {
                console.error('Erro na requisição:', error);
                alert('Ocorreu um erro ao tentar fazer login. Tente novamente mais tarde.');
            }
        });
    }
    
    
    if (registerForm) {
        registerForm.addEventListener('submit', async (e) => {
            e.preventDefault();
    
            const firstName = registerForm.querySelector('input[name="firstName"]').value.trim();
            const lastName = registerForm.querySelector('input[name="lastName"]').value.trim();
            const email = registerForm.querySelector('input[type="email"]').value.trim();
            const password = registerForm.querySelector('input[type="password"]').value.trim();
            const cpf = registerForm.querySelector('input[name="cpf"]').value.trim();
            const phone = registerForm.querySelector('input[type="tel"]').value.trim();
    
            
            if (firstName === '' || lastName === '') {
                alert('Por favor, preencha seu nome completo.');
                return;
            }
    
            if (!validateEmail(email)) {
                alert('Por favor, insira um email válido.');
                return;
            }
    
            if (password.length < 6) {
                alert('A senha deve ter pelo menos 6 caracteres.');
                return;
            }
    
            if (!validateCPF(cpf)) {
                alert('Por favor, insira um CPF válido.');
                return;
            }
    
            if (!validatePhone(phone)) {
                alert('Por favor, insira um número de telefone válido.');
                return;
            }
    
            
            try {
                const response = await fetch('', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ firstName, lastName, email, password, cpf, phone }),
                });
    
                const data = await response.json();
    
                if (response.ok) {
                    alert('Cadastro realizado com sucesso!');
                    
                } else {
                    alert(`Erro: ${data.message}`);
                }
            } catch (error) {
                console.error('Erro na requisição:', error);
                alert('Ocorreu um erro ao tentar realizar o cadastro. Tente novamente mais tarde.');
            }
        });
    }
    
    
    function validateEmail(email) {
        const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return re.test(email);
    }
    
    
    
    
    
    function validatePhone(phone) {
        const re = /^\(?\d{2}\)?[\s-]?\d{4,5}-?\d{4}$/;
        return re.test(phone);
    }</script>
        
  </body>
  </html>
